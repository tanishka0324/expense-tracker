<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expense Tracker Pulse - Login</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #7b5bff, #b88cff);
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
    }

    .login-container {
      background: rgba(0,0,0,0.6);
      padding: 30px;
      border-radius: 12px;
      width: 300px;
      text-align: center;
    }

    .login-container h2 { margin-bottom: 20px; }

    .login-container input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
    }

    .btn {
      background: #7b5bff;
      border: none;
      color: white;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    .btn:hover { background: #956cff; }

    /* Dashboard styles */
    #dashboard {
      display: none;
      width: 100%;
      height: 100vh;
      background: #1b1b1b;
      color: #fff;
      display: flex;
    }

    .sidebar {
      width: 220px;
      background: #111;
      display: flex;
      flex-direction: column;
      padding: 20px 10px;
    }

    .sidebar a {
      text-decoration: none;
      color: #bbb;
      padding: 10px 15px;
      display: block;
      border-radius: 6px;
      transition: background 0.3s;
    }
    .sidebar a:hover, .sidebar a.active {
      background: #222;
      color: #fff;
    }

    .main {
      flex: 1;
      padding: 20px;
      overflow: auto;
    }

    .card {
      background: #222;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; border-bottom: 1px solid #444; }
    input, select { padding: 8px; width: 90%; margin: 5px 0; border: none; border-radius: 4px; }
    canvas { background: #222; border-radius: 10px; }
  </style>
</head>
<body>

  <!-- Login Screen -->
  <div id="loginScreen" class="login-container">
    <h2>Login to Expense Tracker</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button class="btn" onclick="login()">Login</button>
    <p id="error" style="color: red;"></p>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <div class="sidebar">
      <a href="#" class="active">Home</a>
      <a href="#">Expenses</a>
      <a href="#">Trips</a>
      <a href="#">Approvals</a>
      <a href="#">Settings</a>
      <a href="#">Support</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>

    <div class="main">
      <h2>Expense Tracker Dashboard</h2>
      <div class="card">
        <h3>Add New Expense</h3>
        <input type="text" id="desc" placeholder="Description">
        <input type="number" id="amount" placeholder="Amount">
        <select id="category">
          <option>Food</option>
          <option>Travel</option>
          <option>Shopping</option>
          <option>Other</option>
        </select>
        <button class="btn" onclick="addExpense()">+ Add Expense</button>
      </div>

      <div class="card">
        <h3>Expenses</h3>
        <table id="expenseTable">
          <tr><th>Description</th><th>Amount</th><th>Category</th><th>Action</th></tr>
        </table>
      </div>

      <div class="card">
        <h3>Spending Overview</h3>
        <canvas id="expenseChart" height="100"></canvas>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // --- LOGIN SYSTEM ---
  function login() {
    const user = document.getElementById('username').value;
    const pass = document.getElementById('password').value;

    if (user === "admin" && pass === "1234") {
      document.getElementById('loginScreen').style.display = "none";
      document.getElementById('dashboard').style.display = "flex";
      localStorage.setItem("loggedIn", "true");
    } else {
      document.getElementById('error').textContent = "Invalid credentials!";
    }
  }

  function logout() {
    localStorage.removeItem("loggedIn");
    location.reload();
  }

  // Auto login check
  if(localStorage.getItem("loggedIn") === "true") {
    document.getElementById('loginScreen').style.display = "none";
    document.getElementById('dashboard').style.display = "flex";
  }

  // --- EXPENSE TRACKER LOGIC ---
  let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
  const ctx = document.getElementById('expenseChart').getContext('2d');
  const expenseChart = new Chart(ctx, {
    type: 'bar',
    data: { labels: [], datasets: [{ label: 'Expenses', data: [], backgroundColor: ['#7b5bff','#ff5b5b','#5bc0de','#5bff5b'] }] },
    options: { plugins: { legend: { labels: { color: '#fff' } } }, scales: { x: { ticks: { color: '#fff'}}, y: { ticks: { color: '#fff'}}}}
  });

  function updateChart() {
    const catTotals = {};
    expenses.forEach(e => catTotals[e.category] = (catTotals[e.category] || 0) + parseFloat(e.amount));
    expenseChart.data.labels = Object.keys(catTotals);
    expenseChart.data.datasets[0].data = Object.values(catTotals);
    expenseChart.update();
  }

  function renderTable() {
    const table = document.getElementById('expenseTable');
    table.innerHTML = '<tr><th>Description</th><th>Amount</th><th>Category</th><th>Action</th></tr>';
    expenses.forEach((e, i) => {
      table.innerHTML += `<tr><td>${e.desc}</td><td>â‚¬${e.amount}</td><td>${e.category}</td>
      <td><button class="btn" onclick="deleteExpense(${i})">Delete</button></td></tr>`;
    });
    updateChart();
  }

  function addExpense() {
    const desc = document.getElementById('desc').value;
    const amount = document.getElementById('amount').value;
    const category = document.getElementById('category').value;
    if(desc && amount) {
      expenses.push({desc, amount, category});
      localStorage.setItem('expenses', JSON.stringify(expenses));
      renderTable();
      document.getElementById('desc').value='';
      document.getElementById('amount').value='';
    }
  }

  function deleteExpense(i) {
    expenses.splice(i,1);
    localStorage.setItem('expenses', JSON.stringify(expenses));
    renderTable();
  }

  renderTable();
</script>
</body>
</html>
